            ПО ПОДКЛЮЧЕНИЯМ PRi через UART
-- назначения портов для уарт на рпи: по верхней гребенке слева направо - 3 - земля, 4 - TXD, 5 - RXD          
-- если мы стартуем с нуля, то нам надо инициализировать UART в системе, если с нуля, то через линукс рихтуем файл config.txt, куда прописываем строчку enable_uart=1
// эта фича работает не только для убунты, голая рпиОС также принимает этот конфиг
-- или если есть подключение к сети, то через raspi-config
-- для покдлючения в линуксе используем утилиту screen (sudo dnf install screen)
-- sudo screen sudo screen /dev/ttyUSB0 115200, где ttyUSB0 - подключение через переходник, а 115200 - скорость обмена инфой.

            ПО ПОДКЛЮЧЕНИЯМ КАМЕРЫ PRI
            
-- пробуем завести интерфейс камеры
-- изменим config.txt, который находится /boot/config.txt
-- внесем в файл строчку start_x=1


15 сентября

умерла одна из флешек, на которую я запихал линукс, придется переставлять систему на тестировочную флешку. 

сначала думаю попробовать накатить росбианОС с чистой головой и попробовать разобраться-таки со звуком. Если не получится, то буду устанавливать убунту.

также надо таки выбрать путь резервного копирования, иначе этот брел может продолжаться очень долго.

-- поставил raspios, подключился к ней через уарт
-- протестировал звук - звук работает нормально
-- посмотреть версию ядра -- uname -a
-- в итоге звук заработал на ОС Linux raspberrypi 5.10.17-v7l+ #1414 SMP Fri Apr 30 13:20:47 BST 2021 armv7l GNU/Linux
-- лайт версия перед апдейтом рпиос при установке весит 1,3 гб 
($df -h)
-- звук у мня нормально шел на внешней звуковой карте, до обновы я не подключал юсб камеру с микрофоном и не проверял ее. Вполне возможно, что она будет работать также криво, как и в прошлый раз.
-- после обновы система стала занимать 1,5 гб
-- для того, чтобы нормально работала запись звука с внешней звуковой карты, выставляем arecord -f cd - это 44100 16 бит - звук записывается отлично
-- когда тестировал юсб камеру - был такой же косяк, как и в прошлый раз, но, когда поменял режим записи - все стало ок
--протестировал в режиме 16 бит 44100 юсб камеру - все работает ок
--по сути, режим этот хорош для всей периферии.
--интересно заметить, что внешняя звуковая карта не распознается в системе так, как обычно, через lsusb у нее название другое
--вся система работает перед обновами и установкой всех пакетов
--во время работы с утилитой screen для прокрутки терминала вврех/вниз можно воспользоваться командой входа в режим копирования сочетанием клавиш контрол+а+еск
--после накатывания всех пакетов у нас имеется работоспособный в плане звука дист родной платформенной системы

--в таком случае я думаю, что будет удобнее остаться на росбиане просто потому, что эта система хорошо оптимизирована под задачи малины.

//// связка логин/пароль для малиновой оси -- pi/9512357

-- поднял vpn на малине 
($sudo openvpn --config /etc/openvpn/client12.conf)
--гита в лайт версии малинаос нет, поэтому, ставим ее руками

--сборка сервака не стартанула с первого раза, пробуем разобраться, говорит, что нет сервиса nginx.service, перезагрузился

--bash-completion - пакет автодополнения табуляцией
--ощибка была в том, что я создал сервис файл не в той папке - в systemd вместо вложенной в нее system и не заметил этого
--в итоге все стартануло, сэкономилось 25 мегабайт оперативки

--самое время все-таки разобраться с резервным копированием

--попробуем статью про резерное копирование с помощью докера:
https://itisgood.ru/2019/07/25/kak-zapustit-docker-na-raspberry-pi/
    - первый скрипт завершился с ошибкой формата:
    E: Sub-process /usr/bin/dpkg returned an error code (1)
    но, вроде, докер поставился.
    - sudo usermod -aG docker pi - предоставляем пользователю доступ к рабочей группе докера
    -при попытке запуска выпадает сообщение 
    docker: Cannot connect to the Docker daemon at unix
    -пока не понимаю, что с этим делать
    - удалил все куски докера через apt remove docker* и так далее
    - остановился на том, что выяснил, что armv7l -32 разрядная архитектура
    - надо попробовать методы установки по ссылке:
    https://docs.docker.com/engine/install/debian/
    - есть еще одна статья, которую можно было бы изучить:
    https://phoenixnap.com/kb/docker-on-raspberry-pi
    /// вообще, надо понять, в целом подходит ли докер для целей развертывания в иот или нет. Вроде, складывается ощущение, что таки используется
    -- проблема была в установке пакета docker-ce, неизветсно почему, но, сетевые настройки випиен ломали установку и запуск этого пакета
    после отключения випиен все запустилось
    -- теперь включим випиен обратно и попробуем стартануть докер до и после перезагрузки системы.
    (ветка решения на докерфоруме: https://forums.docker.com/t/subprocess-installed-post-installation-script-returned-error-exit-status-1/37444/4)
    -- при запущенном впн до перезагрузки все работает, докер открывает образ.
    -- некие заметки по докеру - для его использования под иот нужен голый образ, который можно написать только самому, можно попробовать засунуть в образ уже сделанную систему, хотя, сомневаюсь, что так получится, образ создается теми же командами, ему тоже надо откуда-то взяться.
    
    
    
    
    
    














